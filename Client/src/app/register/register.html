<div class="w-100 h-100 position-relative mx-auto overflow-hidden" style="z-index: 2; height: 100vh;">
  <div class="row w-100 h-100 m-0">

    <!-- Left side (Image) -->
    <div class="col-lg-7 d-flex justify-content-center align-items-center bg-white d-none d-lg-flex z-3">
      <img src="register.png" alt="Register illustration"
           class="img-fluid" style="max-height: 80vh;">
    </div>

    <!-- Right side (Register card with animated background) -->
  <div class="col-lg-5 d-flex justify-content-center align-items-center position-relative">
    <div class="p-4 rounded shadow-sm bg-white w-75 position-relative overflow-auto" style="z-index: 2; max-height: 90vh;">

        <!-- Profile picture -->
        <div class="d-flex justify-content-center mb-3">
          <img [src]="profilePicture" alt="Profile picture"
               class="rounded-circle bg-primary-subtle"
               style="width: 100px; height: 100px; object-fit: cover; border: 1px solid grey;">
        </div>

        <!-- Title -->
        <div class="text-center fw-bold fs-5 mb-4">
          Register
        </div>

        <!-- Reactive Form -->
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>

        <!-- User Name -->
        <mat-form-field class="w-100 mb-3" appearance="fill">
          <mat-label>User name</mat-label>
          <input matInput type="text" formControlName="userName" placeholder="User name">
          <mat-error *ngIf="registerForm.get('userName')?.touched && registerForm.get('userName')?.invalid">
            <span *ngIf="registerForm.get('userName')?.errors?.['required']">User name is required</span>
            <span *ngIf="registerForm.get('userName')?.errors?.['minlength']">At least 3 characters</span>
            <span *ngIf="registerForm.get('userName')?.errors?.['pattern']">
              Only letters, numbers and _ are allowed
            </span>
          </mat-error>
        </mat-form-field>

          <!-- Email -->
          <mat-form-field class="w-100 mb-3" appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Email">
            <mat-error *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
              <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</span>
              <span *ngIf="registerForm.get('email')?.errors?.['email']">Enter a valid email</span>
            </mat-error>
          </mat-form-field>

          <!-- Full Name -->
          <mat-form-field class="w-100 mb-3" appearance="fill">
            <mat-label>Full name</mat-label>
            <input matInput type="text" formControlName="fullName" placeholder="Full name">
            <mat-error *ngIf="registerForm.get('fullName')?.touched && registerForm.get('fullName')?.invalid">
              <span *ngIf="registerForm.get('fullName')?.errors?.['required']">Full name is required</span>
              <span *ngIf="registerForm.get('fullName')?.errors?.['minlength']">At least 3 characters</span>
            </mat-error>
          </mat-form-field>

          <!-- Password -->
          <mat-form-field class="w-100 mb-4" appearance="fill">
            <mat-label>Password</mat-label>
            <input matInput [type]="hide() ? 'password' : 'text'" formControlName="password" placeholder="Password">
            <mat-icon matSuffix (click)="togglePassowrd($event)" style="cursor: pointer;">
              {{ hide() ? 'visibility_off' : 'visibility' }}
            </mat-icon>
            <mat-error *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
              <span *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</span>
              <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must contain at least one uppercase, one lowercase, one number, and one special character</span>
            </mat-error>
          </mat-form-field>

          <!-- Confirm Password -->
          <mat-form-field class="w-100 mb-4" appearance="fill">
            <mat-label>Confirm Password</mat-label>
            <input matInput [type]="hideConfirm() ? 'password' : 'text'" formControlName="confirmPassword" placeholder="Confirm Password">
            <mat-icon matSuffix (click)="toggleConfirmPassword($event)" style="cursor: pointer;">
              {{ hideConfirm() ? 'visibility_off' : 'visibility' }}
            </mat-icon>
            <mat-error *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched">
              Passwords do not match
            </mat-error>
            <mat-error *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.errors?.['required']">
              Confirm Password is required
            </mat-error>
          </mat-form-field>

          <!-- Upload Button -->
          <input type="file" hidden (change)="onFileSelected($event)" #pic />
          <button mat-raised-button type="button" (click)="pic.click()"
            class="w-100 d-flex align-items-center gap-2 justify-content-center mb-5 text-white rounded p-2 bg-danger">
            <mat-icon>add_a_photo</mat-icon>
            <span>Upload Image</span>
          </button>

          <!-- Submit -->
          <button mat-raised-button color="primary" type="submit" class="w-100"
                  [disabled]="registerForm.invalid">
            Register
          </button>

          <div class="text-center w-100 mt-4">
            Do you have an account? <a routerLink="/login"
            style="text-decoration: none;" class="text-info">Login</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
